<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src = "http://d3js.org/d3.v3.min.js"></script>
  <script src="http://dimplejs.org/dist/dimple.v2.0.0.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <style type="text/css">
    h1 {
      font-family: sans-serif;
      font-size: 30px;
      text-align: center;
    }

    p {
      width = 200px;
      font-family: sans-serif;
      font-size: 14px;
      font-color:#344953;
      text-align: center;
    }

   .chart:hover {
    fill: brown;
   }
   .pink {
      background: pink;
      border: 1px solid purple;
    }
  </style>
  <script type="text/javascript">
    function draw(data) {
      /*
      D3.js setup code, this part will select the "body" and append different elements
      in the body using D3
      */
      "use strict";
        
      d3.select("body")
        .append("h1")
        .text("Tatanic Dataset Analysis Using Bar Charts");
      
      d3.select("body")
        .append("button")
        .attr("class", "btn btn-primary btn-sm ")
        .attr("id", "p1")
        .text("Tatanic survival as per different factors "); 
    
       
       /*
        This part selects different varaible from the document and
        assigned them to three varaible:
        i.e. assigning variables 
     */
   
      var p1button = document.querySelector('#p1');
      

      /* 
      Dimple.js is used to construct the bar chart used for this project. Three different blockes 
      of code are used to draw three different bar charts for different features in the dataset
      */
      
      p1button.addEventListener('click',function(){
      
      var svg1 = dimple.newSvg("body", 1200, 600);
      svg1.append("text").attr("x", (svg1[0][0].clientWidth / 2)).attr("y", 14)
         .attr("text-anchor", "middle").style("font-size", "13px").style("font-weight", "bold")
         .text("Passanger Gender: Female Passangers have high chance of survival as compared to all passangers");
      var myChart1 = new dimple.chart(svg1,data);  
      var x = myChart1.addCategoryAxis("x",'Sex');
      myChart1.addMeasureAxis("y","Survival_rate");
      var myChartSeries1 = myChart1.addSeries(null,dimple.plot.bar);
      myChart1.addLegend(600, 10, 510, 20, "right");
      myChart1.draw();
      
    });
      
      p1button.addEventListener('click',function(){
      var svg2 = dimple.newSvg("body", 1200, 600);
      svg2.append("text").attr("x", (svg2[0][0].clientWidth / 2)).attr("y", 14)
         .attr("text-anchor", "middle").style("font-size", "13px").style("font-weight", "bold")
         .text("Passanger Class: First class passangers have high chance of survival compared to all passangers");
      var myChart2 = new dimple.chart(svg2,data);  
      var x = myChart2.addCategoryAxis("x","Pclass");
      myChart2.addMeasureAxis("y","Survival_rate");
      var myChartSeries2 = myChart2.addSeries(null,dimple.plot.bar);
      myChart2.addLegend(600, 10, 510, 20, "right");
      myChart2.draw();
      

    });
      p1button.addEventListener('click',function(){
      var svg3 = dimple.newSvg("body", 1200, 600);
      svg3.append("text").attr("x", (svg3[0][0].clientWidth / 2)).attr("y", 14)
         .attr("text-anchor", "middle").style("font-size", "13px").style("font-weight", "bold")
         .text(" Passanger Age Group: The age group '20-29' has high chance of survival as compared to all passangers ");
      var myChart3 = new dimple.chart(svg3,data);  
      var x = myChart3.addCategoryAxis("x","age_group");
      myChart3.addMeasureAxis("y","Survival_rate_age");
      var myChartSeries3 = myChart3.addSeries(null,dimple.plot.bar);
      myChart3.addLegend(600, 10, 510, 20, "right");
      myChart3.draw();
      

    }) ;
 
    };
  </script>

</head>
<body>
  
<script type="text/javascript">
  /*
  Use D3 to load the csv file and pass 
  the content of it to the draw function
  */
  d3.csv('titanic_dat_csv.csv', draw);
  
</script>

<script
  src="https://code.jquery.com/jquery-3.2.1.js"
  integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</body>
</html>